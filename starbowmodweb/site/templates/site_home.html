{% extends 'base.html' %}
{% load static %}
{% load bbformat %}
{% block content %}
{{ latest_article.message|bbheader:latest_article|safe }}
<div class="column">
  <h2>News and Updates</h2>
  <ul class="listing">
  {% for article in recent_articles %}
    <li><a href="{{ article.url }}">{{ article.subject }}</a></li>
  {% endfor %}
  </ul>
</div>
<div class="column">
  <h2>Discussion</h2>
  <ul class="listing">
  {% for dicussion in recent_discussions %}
    <li><a href="{{ dicussion.url }}">{{ dicussion.subject }}</a></li>
  {% endfor %}
  </ul>
</div>
<div class="column">
  <h2>Upcoming Events</h2>
  <ul class="listing">
  {% for event in upcoming_events %}
    {% if event.is_today %}
      <li><a href="{{ event.url }}">{{ event.start|date:"g:i A" }} {{ event.name }}</a></li>
    {% else %}
      <li><a href="{{ event.url }}">{{ event.start|date:"Y-m-d" }} {{ event.name }}</a></li>
    {% endif %}
  {% endfor %}
  </ul>
</div>
<div class="column">
  <h2>NA Ladder</h2>
  <table class="ladder-mini">
  <tr>
    <td>Username</td><td>Wins</td><td>Losses</td>
  </tr>
  {% for stats in ladder_na %}
    <tr>
      <td><a href="{% url 'ladder.views.show_player' stats.client.pk %}">{{ stats.client.username }}</a></td>
      <td style="text-align:right;">{{ stats.ladder_wins }}</td>
      <td style="text-align:right;">{{ stats.ladder_losses }}</td>
    </tr>
  {% endfor %}
  </table>
</div>
<div class="column">
  <h2>EU Ladder</h2>
  <table class="ladder-mini">
  <tr>
    <td>Username</td><td>Wins</td><td>Losses</td>
  </tr>
  {% for stats in ladder_eu %}
    <tr>
      <td><a href="{% url 'ladder.views.show_player' stats.client.pk %}">{{ stats.client.username }}</a></td>
      <td style="text-align:right;">{{ stats.ladder_wins }}</td>
      <td style="text-align:right;">{{ stats.ladder_losses }}</td>
    </tr>
  {% endfor %}
  </table>
</div>
<div class="column">
  <h2>KR Ladder</h2>
  <table class="ladder-mini">
  <tr>
    <td>Username</td><td>Wins</td><td>Losses</td>
  </tr>
  {% for stats in ladder_kr %}
    <tr>
      <td><a href="{% url 'ladder.views.show_player' stats.client.pk %}">{{ stats.client.username }}</a></td>
      <td style="text-align:right;">{{ stats.ladder_wins }}</td>
      <td style="text-align:right;">{{ stats.ladder_losses }}</td>
    </tr>
  {% endfor %}
  </table>
</div>
{% endblock %}
